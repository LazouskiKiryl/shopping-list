(this["webpackJsonpshopping-list-app"]=this["webpackJsonpshopping-list-app"]||[]).push([[0],{38:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(21),s=n.n(a),i=n(6),r=n(11),u=n(2),l=n(3),o=n(4),j=n(5),d=n.n(j),b=n(7),p=n(14),h=n(15),f=n(26),O=n.n(f),v="https://kopyl.herokuapp.com/",x=O.a.create({baseURL:v}),m=O.a.create({baseURL:v});m.interceptors.request.use((function(e){var t=localStorage.getItem("accessToken");return t&&(e.headers["x-access-token"]=t),e}));var _=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"check",value:function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/auth/check");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"registration",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.post("/auth/registration",{username:t,password:n});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.post("/auth/login",{username:t,password:n});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),g=_,k="USER:SET_USER",y="USER:REMOVE_USER",w={isAuth:!1,name:"Test 1"},N=function(e){return{type:k,user:e}},S=function(){return{type:y}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(u.a)(Object(u.a)({},e),{},{isAuth:!0,name:t.user.name});case y:return Object(u.a)(Object(u.a)({},e),{},{isAuth:!1,name:null});default:return e}},C=function(e){return""===e.trim()?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f":e.length<3||e.length>20?"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 3 \u0434\u043e 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":""},L=function(e){return""===e.trim()?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c":e.length<5||e.length>30?"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 5 \u0434\u043e 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":""},A=n(23),E=(n(71),n(12)),T=n.n(E),I=n(0),U=["children","variant","visible"],V=function(e){var t=e.children,n=e.variant,c=void 0===n?"primary":n,a=e.visible,s=void 0===a||a,i=Object(A.a)(e,U),r=T()({button:!0,button_primary:"primary"===c,button_secondary:"secondary"===c,button_transparent:"transparent"===c,hidden:!s});return Object(I.jsx)("button",Object(u.a)(Object(u.a)({className:r},i),{},{children:t}))},R=(n(38),n(73),function(e){var t=e.type,n=void 0===t?"text":t,a=e.initialValue,s=void 0===a?"":a,i=e.placeholder,r=void 0===i?"":i,u=e.disabled,o=void 0!==u&&u,j=e.validate,d=e.onUpdate,b=Object(c.useState)(s),p=Object(l.a)(b,2),h=p[0],f=p[1],O=Object(c.useState)(""),v=Object(l.a)(O,2),x=v[0],m=v[1],_=T()({"text-field__input":!0,"text-field__input_invalid":x});return Object(I.jsxs)("div",{className:"text-field",children:[Object(I.jsx)("input",{className:_,type:n,placeholder:r,value:h,disabled:o,onChange:function(e){var t=e.target.value;f(t),m(""),d(t,!0)},onBlur:function(e){var t=j(h);m(t),d(h,""===t)}}),Object(I.jsx)("p",{className:"text-field__hint",children:x})]})}),P=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),u=Object(l.a)(s,2),o=u[0],j=u[1],p=Object(c.useState)({value:"lllll",isValid:!0}),h=Object(l.a)(p,2),f=h[0],O=h[1],v=Object(c.useState)({value:"lllll",isValid:!0}),x=Object(l.a)(v,2),m=x[0],_=x[1],k=Object(i.b)(),y=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,s,i,r,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f.isValid&&m.isValid){e.next=3;break}return e.abrupt("return");case 3:return j(""),a(!0),e.prev=5,e.next=8,g.login(f.value,m.value);case 8:n=e.sent,c=n.user,s=n.token,k(N(c)),localStorage.setItem("accessToken",s),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(5),u=(null===(i=e.t0.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||e.t0.message,a(!1),j(u);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),w=n?"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u0445\u043e\u0434":"\u0412\u043e\u0439\u0442\u0438";return Object(I.jsxs)("form",{className:"form",children:[o&&Object(I.jsx)("p",{className:"form__error",children:o}),Object(I.jsx)(R,{initialValue:f.value,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",disabled:n,validate:C,onUpdate:function(e,t){O({value:e,isValid:t}),j("")}}),Object(I.jsx)(R,{type:"password",initialValue:m.value,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:n,validate:L,onUpdate:function(e,t){_({value:e,isValid:t}),j("")}}),Object(I.jsx)(V,{onClick:y,disabled:n,children:w}),Object(I.jsx)(r.b,{className:"form__link",to:"/signup",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},M=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),u=Object(l.a)(s,2),o=u[0],j=u[1],p=Object(c.useState)({value:"",isValid:!1}),h=Object(l.a)(p,2),f=h[0],O=h[1],v=Object(c.useState)({value:"",isValid:!1}),x=Object(l.a)(v,2),m=x[0],_=x[1],k=Object(i.b)(),y=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,s,i,r,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(""),a(!0),e.prev=3,e.next=6,g.registration(f.value,m.value);case 6:n=e.sent,c=n.user,s=n.token,k(N(c)),localStorage.setItem("accessToken",s),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),u=(null===(i=e.t0.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||e.t0.message,j(u),a(!1);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),w=n?"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f";return Object(I.jsxs)("form",{className:"form",children:[o&&Object(I.jsx)("p",{className:"form__error",children:o}),Object(I.jsx)(R,{initialValue:f.value,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",disabled:n,validate:C,onUpdate:function(e,t){O({value:e,isValid:t}),j("")}}),Object(I.jsx)(R,{type:"password",initialValue:m.value,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:n,validate:L,onUpdate:function(e,t){_({value:e,isValid:t}),j("")}}),Object(I.jsx)(V,{onClick:y,disabled:n,children:w}),Object(I.jsx)(r.b,{className:"form__link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})},z=(n(78),function(){var e=Object(o.h)().pathname,t="/login"===e,n="/signup"===e;return Object(I.jsxs)("div",{className:"auth container center",children:[t&&Object(I.jsx)(P,{}),n&&Object(I.jsx)(M,{})]})}),H=n(92),B=n(16),F=n(41),G=n(42),J=n(29),W=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"fetchData",value:function(){return m.get("/data/")}},{key:"createPurchase",value:function(e,t,n){return m.post("/data/purchase",{title:e,count:t,listId:n})}},{key:"updatePurchase",value:function(e){var t=e.id,n=e.title,c=e.count,a=e.done;return m.put("/data/purchase/".concat(t),{title:n,count:c,done:a})}},{key:"deletePurchase",value:function(e){return m.delete("/data/purchase/".concat(e))}},{key:"createList",value:function(e){return m.post("/data/list/",{title:e})}},{key:"updateList",value:function(e,t){return m.put("/data/list/".concat(e),{title:t})}},{key:"deleteList",value:function(e){return m.delete("/data/list/".concat(e))}}]),e}(),q="DATA:SET_IS_LOADING",Y="DATA:SET_IS_UPDATING",K="DATA:SET_LISTS",Q="DATA:ADD_LIST",X="DATA:UPDATE_LIST",Z="DATA:DELETE_LIST",$="DATA:SET_PURCHASES",ee="DATA:ADD_PURCHASE",te="DATA:UPDATE_PURCHASE",ne="DATA:DELETE_PURCHASE",ce={isLoading:!0,isUpdating:!1,lists:[],purchases:[]},ae=function(e){return{type:q,isLoading:e}},se=function(e){return{type:Y,isUpdating:e}},ie=function(e){return{type:K,lists:e}},re=function(e,t){return{type:X,list:e,id:t}},ue=function(e){return{type:$,purchases:e}},le=function(e,t){return{type:te,purchase:e,id:t}};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.isLoading});case Y:return Object(u.a)(Object(u.a)({},e),{},{isUpdating:t.isUpdating});case $:return Object(u.a)(Object(u.a)({},e),{},{purchases:t.purchases});case ee:return Object(u.a)(Object(u.a)({},e),{},{purchases:[].concat(Object(J.a)(e.purchases),[t.purchase])});case te:var n=Object(u.a)({},t.purchase);return t.id&&(n.id=t.id),Object(u.a)(Object(u.a)({},e),{},{purchases:e.purchases.map((function(e){return e.id!==t.purchase.id?e:n}))});case ne:return Object(u.a)(Object(u.a)({},e),{},{purchases:e.purchases.filter((function(e){return e.id!==t.id}))});case K:return Object(u.a)(Object(u.a)({},e),{},{lists:t.lists});case Q:return Object(u.a)(Object(u.a)({},e),{},{lists:[].concat(Object(J.a)(e.lists),[t.list])});case X:var c=Object(u.a)({},t.list);return t.id&&(c.id=t.id),Object(u.a)(Object(u.a)({},e),{},{lists:e.lists.map((function(e){return e.id!==t.list.id?e:c}))});case Z:return Object(u.a)(Object(u.a)({},e),{},{lists:e.lists.filter((function(e){return e.id!==t.id}))});default:return e}},je=Object(B.combineReducers)({user:D,data:oe}),de=Object(B.createStore)(je,Object(F.composeWithDevTools)(Object(B.applyMiddleware)(G.a))),be=0,pe=function(){0===be&&de.dispatch(se(!0)),be++},he=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:0===--be&&de.dispatch(se(!1)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),setTimeout((function(){he(t)}),2e3);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"addList",value:function(e){var t={id:Object(H.a)(),title:e};pe(),de.dispatch(function(e){return{type:Q,list:e}}(t)),he(Object(b.a)(d.a.mark((function n(){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W.createList(e);case 2:c=n.sent,de.dispatch(re(t,c.data.id));case 4:case"end":return n.stop()}}),n)}))))}},{key:"updateList",value:function(e,t){pe(),de.dispatch(re({id:e,title:t})),he(Object(b.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W.updateList(e,t);case 2:case"end":return n.stop()}}),n)}))))}},{key:"deleteList",value:function(e){pe(),de.dispatch(function(e){return{type:Z,id:e}}(e)),he(Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.deleteList(e);case 2:case"end":return t.stop()}}),t)}))))}},{key:"addPurchase",value:function(e,t,n){var c={id:Object(H.a)(),title:e,count:t,listId:n};pe(),de.dispatch(function(e){return{type:ee,purchase:e}}(c)),he(Object(b.a)(d.a.mark((function a(){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,W.createPurchase(e,t,n);case 2:s=a.sent,de.dispatch(le(c,s.data.id));case 4:case"end":return a.stop()}}),a)}))))}},{key:"updatePurchase",value:function(e){pe(),de.dispatch(le(e)),he(Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.updatePurchase(e);case 2:case"end":return t.stop()}}),t)}))))}},{key:"deletePurchase",value:function(e){pe(),de.dispatch(function(e){return{type:ne,id:e}}(e)),he(Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.deletePurchase(e);case 2:case"end":return t.stop()}}),t)}))))}}]),e}(),Oe=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object(c.useRef)(t);Object(c.useLayoutEffect)((function(){a.current=t}),[t]),Object(c.useEffect)((function(){if(n){var t=function(t){e.current&&!e.current.contains(t.target)&&a.current()};return document.addEventListener("click",t),function(){document.removeEventListener("click",t)}}}),[e,n])},ve=(n(79),function(e){var t=e.onCreate,n=Object(c.useState)(!1),a=Object(l.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)(""),u=Object(l.a)(r,2),o=u[0],j=u[1],d=Object(c.useRef)(),b=Object(c.useRef)();Oe(d,(function(){""!==o.trim()&&t(o),i(!1)}),s);return Object(I.jsxs)("form",{className:"list-form",ref:d,children:[s&&Object(I.jsx)("input",{className:"list-form__title",ref:b,type:"text",value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430",onChange:function(e){return j(e.target.value)},autoFocus:!0}),Object(I.jsxs)("div",{className:"list-form__buttons",children:[Object(I.jsx)(V,{visible:s,onClick:function(e){e.preventDefault(),""===o.trim()?b.current.focus():(t(o),j(""),i(!1))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"}),Object(I.jsx)(V,{visible:s,onClick:function(e){e.preventDefault(),i(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(I.jsx)(V,{visible:!s,onClick:function(e){e.preventDefault(),j(""),i(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"})]})]})}),xe=(n(80),Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[Object(I.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(I.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})]})),me=["typeIcon","variant"],_e={close:Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[Object(I.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(I.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]}),delete:Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[Object(I.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(I.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})]}),edit:Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[Object(I.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(I.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})]}),more:Object(I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[Object(I.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(I.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})]}),ok:xe},ge=xe,ke=function(e){var t=e.typeIcon,n=e.variant,c=void 0===n?"dark":n,a=Object(A.a)(e,me),s=_e[t]||ge,i=T()({"icon-button":!0,"icon-button_dark":"dark"===c,"icon-button_light":"light"===c});return Object(I.jsx)("button",Object(u.a)(Object(u.a)({className:i},a),{},{children:s}))},ye=function(e){var t=e.list,n=e.onUpdate,a=e.onCancel,s=Object(c.useState)(t.title),i=Object(l.a)(s,2),r=i[0],u=i[1],o=Object(c.useRef)(),j=Object(c.useRef)();Object(c.useEffect)((function(){j.current.focus()}),[]);var d=function(){r!==t.title?n({title:r}):a()};Oe(o,d);return Object(I.jsxs)("form",{className:"list-item list-item_edit",ref:o,children:[Object(I.jsx)("div",{className:"list-item__content",children:Object(I.jsx)("input",{className:"list-item__title list-item__title_edit",ref:j,type:"text",value:r,onChange:function(e){return u(e.target.value)}})}),Object(I.jsxs)("div",{className:"list-item__buttons",children:[Object(I.jsx)(ke,{typeIcon:"ok",onClick:function(e){e.preventDefault(),d()}}),Object(I.jsx)(ke,{typeIcon:"close",onClick:function(e){e.preventDefault(),a()}})]})]})},we=(n(81),function(e){var t=e.list,n=e.active,a=e.onDelete,s=Object(c.useState)(!1),i=Object(l.a)(s,2),u=i[0],o=i[1];if(u)return Object(I.jsx)(ye,{list:t,onUpdate:function(e){var n=e.title;fe.updateList(t.id,n),o(!1)},onCancel:function(){o(!1)}});var j=T()({"list-item":!0,"list-item_active":n});return Object(I.jsxs)("div",{className:j,children:[Object(I.jsx)("div",{className:"list-item__content",children:Object(I.jsx)(r.c,{to:"/list/".concat(t.id||""),className:"list-item__title",exact:!0,children:t.title})}),Object(I.jsxs)("div",{className:"list-item__buttons",children:[Object(I.jsx)(ke,{typeIcon:"edit",onClick:function(e){e.preventDefault(),o(!0)}}),Object(I.jsx)(ke,{typeIcon:"delete",onClick:function(){return a(t.id)}})]})]})}),Ne=(n(82),function(e){var t=e.lists,n=e.activeList,c=Object(o.g)(),a=function(e){var a;if(fe.deleteList(e),n.id===e){var s=t.findIndex((function(e){return e===n})),i=null===(a=t[s-1])||void 0===a?void 0:a.id;i?c.replace("/list/"+i):c.replace("/list")}},s=t.map((function(e){return Object(I.jsx)(we,{list:e,active:e===n,onDelete:a},e.id)})),i=0===s.length;return Object(I.jsxs)("div",{className:"lists",children:[i?Object(I.jsx)("p",{className:"lists__message",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a"}):s,Object(I.jsx)(ve,{onCreate:function(e){fe.addList(e)}})]})}),Se=(n(83),function(e){var t=e.onCreate,n=Object(c.useState)(!1),a=Object(l.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)(""),u=Object(l.a)(r,2),o=u[0],j=u[1],d=Object(c.useState)(""),b=Object(l.a)(d,2),p=b[0],h=b[1],f=Object(c.useRef)(null),O=Object(c.useRef)(null);Object(c.useLayoutEffect)((function(){s&&f.current.scrollIntoView({behavior:"smooth",block:"center"})}));Oe(f,(function(){""!==o.trim()&&t(o,p),i(!1)}),s);var v=T()({"purchase-form__inputs":!0,"purchase-form__inputs_hidden":!s});return Object(I.jsxs)("form",{className:"purchase-form",ref:f,children:[Object(I.jsxs)("div",{className:v,children:[Object(I.jsx)("input",{className:"purchase-form__title",ref:O,type:"text",value:o,onChange:function(e){return j(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043a\u0443\u043f\u043a\u0438"}),Object(I.jsx)("input",{className:"purchase-form__count",type:"text",value:p,onChange:function(e){return h(e.target.value)},placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"})]}),Object(I.jsxs)("div",{className:"purchase-form__buttons",children:[Object(I.jsx)(V,{visible:s,onClick:function(e){e.preventDefault(),""!==o.trim()&&(t(o,p),j(""),h("")),O.current.focus()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0443"}),Object(I.jsx)(V,{visible:s,onClick:function(e){e.preventDefault(),i(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(I.jsx)(V,{visible:!s,onClick:function(e){e.preventDefault(),j(""),h(""),i(!0),O.current.focus()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0443"})]})]})}),De=function(e){var t=e.purchase,n=e.onUpdate,a=e.onCancel,s=Object(c.useState)(t.title),i=Object(l.a)(s,2),r=i[0],u=i[1],o=Object(c.useState)(t.count),j=Object(l.a)(o,2),d=j[0],b=j[1],p=Object(c.useRef)(),h=Object(c.useRef)();Object(c.useEffect)((function(){h.current.focus()}),[]);var f=function(){r!==t.title||d!==t.count?n({title:r,count:d}):a()};Oe(p,f);return Object(I.jsxs)("form",{className:"purchase-item purchase-item_active",ref:p,children:[Object(I.jsxs)("div",{className:"purchase-item__content",children:[Object(I.jsx)("input",{className:"purchase-item__title",ref:h,type:"text",value:r,onChange:function(e){return u(e.target.value)}}),Object(I.jsx)("input",{className:"purchase-item__count",type:"text",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(I.jsxs)("div",{className:"purchase-item__buttons purchase-item__buttons_visible",children:[Object(I.jsx)(ke,{typeIcon:"ok",onClick:function(e){e.preventDefault(),f()}}),Object(I.jsx)(ke,{typeIcon:"close",onClick:function(e){e.preventDefault(),a()}})]})]})},Ce=(n(84),function(e){var t=e.purchase,n=Object(c.useState)(!1),a=Object(l.a)(n,2),s=a[0],i=a[1];return s?Object(I.jsx)(De,{purchase:t,onUpdate:function(e){var n=e.title,c=e.count;fe.updatePurchase(Object(u.a)(Object(u.a)({},t),{},{title:n,count:c})),i(!1)},onCancel:function(){i(!1)}}):Object(I.jsxs)("div",{className:"purchase-item",children:[Object(I.jsx)("input",{className:"purchase-item__checkbox",type:"checkbox",checked:t.done,onChange:function(e){fe.updatePurchase(Object(u.a)(Object(u.a)({},t),{},{done:e.target.checked}))}}),Object(I.jsxs)("div",{className:"purchase-item__content",children:[Object(I.jsx)("span",{className:"purchase-item__title",children:t.title}),Object(I.jsx)("span",{className:"purchase-item__count",children:t.count})]}),Object(I.jsxs)("div",{className:"purchase-item__buttons",children:[Object(I.jsx)(ke,{typeIcon:"edit",onClick:function(e){e.preventDefault(),i(!0)}}),Object(I.jsx)(ke,{typeIcon:"delete",onClick:function(e){e.preventDefault(),fe.deletePurchase(t.id)}})]})]})}),Le=(n(85),function(e){var t=e.list,n=Object(c.useState)([]),a=Object(l.a)(n,2),s=a[0],r=a[1],u=Object(c.useState)([]),o=Object(l.a)(u,2),j=o[0],d=o[1],b=Object(c.useState)(!1),p=Object(l.a)(b,2),h=p[0],f=p[1],O=Object(i.c)((function(e){return e.data.purchases})),v=null===t||void 0===t?void 0:t.title;Object(c.useEffect)((function(){var e=t?O.filter((function(e){return e.listId===t.id})):O,n=e.filter((function(e){return!e.done}));r(n);var c=e.filter((function(e){return e.done}));d(c)}),[O,t]);var x=s.map((function(e){return Object(I.jsx)(Ce,{purchase:e},e.id)})),m=j.map((function(e){return Object(I.jsx)(Ce,{purchase:e},e.id)})),_=0===x.length,g=0===m.length,k=h?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c";return Object(I.jsxs)("div",{className:"purchase-list",children:[Object(I.jsxs)("div",{className:"purchase-list__section",children:[Object(I.jsxs)("h3",{className:"purchase-list__title",children:[v," ",Object(I.jsx)("span",{className:"purchase-list__count",children:x.length})]}),_?Object(I.jsx)("p",{className:"purchase-list__message",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442"}):Object(I.jsx)("div",{className:"purchase-list__list",children:x}),Object(I.jsx)(Se,{onCreate:function(e,n){fe.addPurchase(e,n,t.id)}})]}),!g&&Object(I.jsxs)("div",{className:"purchase-list__section",children:[Object(I.jsxs)("div",{className:"purchase-list__header",children:[Object(I.jsxs)("h3",{className:"purchase-list__title purchase-list__title_done",children:["\u041a\u0443\u043f\u043b\u0435\u043d\u043e ",Object(I.jsx)("span",{className:"purchase-list__count",children:m.length})]}),Object(I.jsx)(V,{variant:"secondary",onClick:function(e){e.preventDefault(),f((function(e){return!e}))},children:k})]}),h&&Object(I.jsx)("div",{className:"purchase-list__list",children:m})]})]})}),Ae=(n(86),Object(I.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:Object(I.jsx)("circle",{cx:"50",cy:"50",fill:"none",strokeWidth:"15",r:"30",strokeDasharray:"141.37166941154067 49.12388980384689",children:Object(I.jsx)("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"})})})),Ee=function(){return Object(I.jsx)("div",{className:"loader",children:Ae})},Te=(n(87),[{path:"/login",component:z,exact:!0},{path:"/signup",component:z,exact:!0}]),Ie=[{path:["/list","/list/:listId"],component:function(){var e=Object(i.c)((function(e){return e.data.isLoading})),t=Object(i.c)((function(e){return e.data.lists})),n=Object(o.i)().listId,a=Object(i.b)(),s=Object(o.g)(),r=n?t.find((function(e){return e.id===n})):null;return Object(c.useEffect)((function(){a((function(e){e(ae(!0)),W.fetchData().then((function(t){e(ie(t.data.lists)),e(ue(t.data.purchases))})).finally((function(){return e(ae(!1))}))}))}),[a]),Object(c.useEffect)((function(){n||e||0===t.length||s.replace("/list/"+t[0].id)}),[s,e,n,t]),Object(I.jsx)("div",{className:"shopping-list container",children:e?Object(I.jsx)("div",{className:"center",children:Object(I.jsx)(Ee,{})}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"shopping-list__navigation",children:Object(I.jsx)(Ne,{lists:t,activeList:r})}),Object(I.jsx)("div",{className:"shopping-list__content",children:r&&Object(I.jsx)(Le,{list:r})})]})})},exact:!0}],Ue=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(i.c)((function(e){return e.user.isAuth})),r=Object(i.b)();return Object(c.useEffect)((function(){g.check().then((function(e){var t=e.user,n=e.token;r(N(t)),localStorage.setItem("accessToken",n)})).catch((function(e){r(S())})).finally((function(){return a(!1)}))}),[r]),n?Object(I.jsx)("div",{className:"container center",children:Object(I.jsx)(Ee,{})}):Object(I.jsx)(I.Fragment,{children:s?Object(I.jsxs)(o.d,{children:[Ie.map((function(e){return Object(I.jsx)(o.b,Object(u.a)({},e),e.path)})),Object(I.jsx)(o.a,{to:"/list"})]}):Object(I.jsxs)(o.d,{children:[Te.map((function(e){return Object(I.jsx)(o.b,Object(u.a)({},e),e.path)})),Object(I.jsx)(o.a,{to:"/login"})]})})},Ve=(n(88),function(){var e=Object(i.c)((function(e){return e.user.isAuth})),t=Object(i.c)((function(e){return e.user.name})),n=Object(i.c)((function(e){return e.data.isUpdating})),c=Object(i.b)();return Object(I.jsx)("header",{className:"header",children:Object(I.jsxs)("div",{className:"header__container container",children:[Object(I.jsx)(r.b,{className:"header__title",to:"/",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043f\u0443\u043f\u043e\u043a"}),e&&Object(I.jsxs)("div",{className:"header__navigation",children:[n&&Object(I.jsx)(Ee,{}),Object(I.jsx)("span",{children:t}),Object(I.jsx)(V,{variant:"transparent",onClick:function(){localStorage.removeItem("accessToken"),c(ue([])),c(ie([])),c(S()),c(ae(!0))},children:"\u0412\u044b\u0439\u0442\u0438"})]})]})})}),Re=function(){return Object(I.jsxs)(r.a,{basename:"shopping-list",children:[Object(I.jsx)(Ve,{}),Object(I.jsx)("main",{className:"main-container",children:Object(I.jsx)(Ue,{})})]})};n(89);s.a.render(Object(I.jsx)(i.a,{store:de,children:Object(I.jsx)(Re,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.8d50f191.chunk.js.map